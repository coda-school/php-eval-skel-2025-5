{% extends 'base.html.twig' %}

{% block title %}Swiffer - Inscription{% endblock %}

{% block stylesheets %}
    <style>
    Body {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    }
    .theme-toggle1 {
        background: transparent;
        border: 2px solid var(--text);
        color: var(--text);
        border-radius: 25px;
        padding: 12px 24px;
        cursor: pointer;
        font-weight: 700;
        width: 100%;
        margin-top: 20px;
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 1px;
    }

    .theme-toggle1:hover {
        background: var(--text);
        color: var(--bg-base);
    }

    </style>
{% endblock %}

{% block body %}
    <div class="register-card">
        <h1 class="logo-text">Rejoindre Swiffer</h1>
        <p class="welcome-text">Créez votre profil en quelques secondes.</p>

        {{ form_start(registrationForm) }}

        {% if form_errors(registrationForm) %}
            <div style="background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #fca5a5; padding: 10px; border-radius: 12px; margin-bottom: 15px; font-size: 0.8rem;">
                {{ form_errors(registrationForm) }}
            </div>
        {% endif %}

        <div class="input-group">
            {{ form_label(registrationForm.username, "Nom d'utilisateur") }}
            {{ form_widget(registrationForm.username, {'attr': {'placeholder': '@username'}}) }}
        </div>

        <div class="input-group">
            {{ form_label(registrationForm.email, "Email") }}
            {{ form_widget(registrationForm.email, {'attr': {'placeholder': 'votre@email.com'}}) }}
        </div>

        <div class="input-group">
            {{ form_label(registrationForm.plainPassword, "Mot de passe") }}
            {{ form_widget(registrationForm.plainPassword, {'attr': {'placeholder': '••••••••'}}) }}
        </div>

        <div class="checkbox-group">
            {{ form_widget(registrationForm.agreeTerms) }}
            <span>J'accepte les conditions d'utilisation</span>
        </div>

        <button type="submit" class="btn-register">Créer mon compte</button>
        {{ form_end(registrationForm) }}

        <div class="login-text">
            Déjà inscrit ? <a href="{{ path('app_login') }}">Se connecter</a>
            <button class="theme-toggle1" onclick="toggleTheme()">Changer Thème</button>
        </div>
        <script>
            (function() {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.documentElement.setAttribute("data-theme", "dark");
                }
            })();

            function toggleTheme() {
                const root = document.documentElement;

                if (root.hasAttribute("data-theme")) {
                    root.removeAttribute("data-theme");
                    localStorage.setItem('theme', 'light');
                } else {
                    root.setAttribute("data-theme", "dark");
                    localStorage.setItem('theme', 'dark');
                }
            }

            function toggleMenu() {
                const sidebar = document.querySelector('.sidebar');
                const overlay = document.querySelector('.menu-overlay');
                if(sidebar) sidebar.classList.toggle('active');
                if(overlay) overlay.classList.toggle('active');
            }
        </script>
    </div>
{% endblock %}
